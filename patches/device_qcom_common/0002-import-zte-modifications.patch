From b5656dd9d51c51540d7113796409e0a37698f097 Mon Sep 17 00:00:00 2001
From: Konsta <konsta09@gmail.com>
Date: Tue, 19 Aug 2014 14:51:30 +0300
Subject: [PATCH 2/2] import zte modifications

Change-Id: I2437cc18764027db5bfbd9a2d96abf6b9e9190f7
---
 rootdir/etc/init.qcom.rc     |   75 +++++++++----
 rootdir/etc/init.qcom.usb.rc |  255 ++++++++++++++++++++++++++++++++++++++----
 rootdir/etc/init.qcom.usb.sh |    9 +-
 3 files changed, 299 insertions(+), 40 deletions(-)
 mode change 100644 => 100755 rootdir/etc/init.qcom.usb.rc
 mode change 100644 => 100755 rootdir/etc/init.qcom.usb.sh

diff --git a/rootdir/etc/init.qcom.rc b/rootdir/etc/init.qcom.rc
index b426cba..0cd3927 100644
--- a/rootdir/etc/init.qcom.rc
+++ b/rootdir/etc/init.qcom.rc
@@ -36,16 +36,12 @@ on init
     mkdir /persist 0771 system system
     # See storage config details at http://source.android.com/tech/storage/
     mkdir /storage 0050 system sdcard_r
-    mkdir /mnt/media_rw/sdcard 0700 media_rw media_rw
-    mkdir /mnt/media_rw/sdcard1 0700 media_rw media_rw
-    mkdir /mnt/media_rw/usbotg 0700 media_rw media_rw
-    mkdir /mnt/media_rw/uicc0 0700 media_rw media_rw
-    mkdir /mnt/media_rw/uicc1 0700 media_rw media_rw
-    mkdir /storage/sdcard 0700 root root
-    mkdir /storage/sdcard1 0700 root root
-    mkdir /storage/uicc0 0700 root root
-    mkdir /storage/usbotg 0700 root root
-    symlink /storage/sdcard /sdcard
+    mkdir /mnt/media_rw/sdcard0 0700 media_rw media_rw
+    mkdir /storage/sdcard0 0700 root root
+    export EXTERNAL_STORAGE /storage/sdcard0
+    # Support legacy paths
+    symlink /storage/sdcard0 /mnt/sdcard
+    symlink /storage/sdcard0 /sdcard
 
 on early-boot
     # set RLIMIT_MEMLOCK to 64MB
@@ -246,6 +242,54 @@ on post-fs-data
 
     setprop vold.post_fs_data_done 1
 
+#[ECID:000000] ZTEBSP wanghaifei 20130905 start, for sensor init
+    chmod 664 /dev/light_sensor
+    chown system root /dev/light_sensor
+
+    chown system root /sys/class/i2c-adapter/i2c-0/0-0018/enable_device
+    chown system root /sys/class/i2c-adapter/i2c-0/0-0018/pollrate_ms
+    chown system root /sys/class/i2c-adapter/i2c-0/0-0019/enable_device
+    chown system root /sys/class/i2c-adapter/i2c-0/0-0019/pollrate_ms
+    chown system root /sys/class/i2c-adapter/i2c-0/0-000f/enable_device
+    chown system root /sys/class/i2c-adapter/i2c-0/0-000f/pollrate_ms
+    chown system root /sys/class/i2c-adapter/i2c-0/0-0068/enable_device
+    chown system root /sys/class/i2c-adapter/i2c-0/0-0068/pollrate_ms
+
+    chmod 664 /dev/akm8963_dev
+    chmod 664 /dev/akm8963
+    chown system root /dev/akm8963_dev
+    chown system root /dev/akm8963
+    chown system root /sys/class/compass/akm8963/enable_acc
+    chown system root /sys/class/compass/akm8963/enable_mag
+    chown system root /sys/class/compass/akm8963/enable_ori
+    chown system root /sys/class/compass/akm863/delay_acc
+    chown system root /sys/class/compass/akm8963/delay_mag
+    chown system root /sys/class/compass/akm8963/delay_ori
+    chown system root /sys/class/compass/akm8963/accel
+
+    chmod 664 /dev/akm09911_dev
+    chmod 664 /dev/akm09911
+    chown system root /dev/akm09911_dev
+    chown system root /dev/akm09911
+    chown system root /sys/class/compass/akm09911/enable_acc
+    chown system root /sys/class/compass/akm09911/enable_mag
+    chown system root /sys/class/compass/akm09911/enable_fusion
+    chown system root /sys/class/compass/akm09911/delay_acc
+    chown system root /sys/class/compass/akm09911/delay_mag
+    chown system root /sys/class/compass/akm09911/delay_fusion
+    chown system root /sys/class/compass/akm09911/accel
+#[ECID:000000] ZTEBSP wanghaifei 20130905 end, for sensor init
+
+#//[ECID:0000]ZTE_BSP maxiaoping 20130821 modify leds&vibrator feature for 8x26,start.
+    chown system system /sys/class/leds/lcd-backlight/brightness
+    chown system system /sys/class/leds/button-backlight/brightness
+    chown system system /sys/class/leds/red/brightness
+    chown system system /sys/class/leds/green/brightness
+    chown system system /sys/class/leds/red/blink
+    chown system system /sys/class/leds/green/blink
+    chown system system /sys/class/timed_output/vibrator/enable
+#//[ECID:0000]ZTE_BSP maxiaoping 20130821 modify leds&vibrator feature for 8x26,end.
+
     #Create a folder for SRS to be able to create a usercfg file
     mkdir /data/data/media 0770 media media
 
@@ -738,16 +782,7 @@ service profiler_daemon /system/bin/profiler_daemon
     group root
     disabled
 
-service fuse_sdcard /system/bin/sdcard -u 1023 -g 1023 /mnt/media_rw/sdcard /storage/sdcard
-    class late_start
-
-service fuse_sdcard1 /system/bin/sdcard -u 1023 -g 1023 /mnt/media_rw/sdcard1 /storage/sdcard1
-    class late_start
-
-service fuse_uicc0 /system/bin/sdcard -u 1023 -g 1023 -w 1023 -d /mnt/media_rw/uicc0 /storage/uicc0
-    class late_start
-
-service fuse_usbotg /system/bin/sdcard -u 1023 -g 1023 -w 1023 -d /mnt/media_rw/usbotg /storage/usbotg
+service fuse_sdcard0 /system/bin/sdcard -u 1023 -g 1023 /mnt/media_rw/sdcard0 /storage/sdcard0
     class late_start
 
 service hcidump /system/bin/sh /system/etc/hcidump.sh
diff --git a/rootdir/etc/init.qcom.usb.rc b/rootdir/etc/init.qcom.usb.rc
old mode 100644
new mode 100755
index d24403f..67309b0
--- a/rootdir/etc/init.qcom.usb.rc
+++ b/rootdir/etc/init.qcom.usb.rc
@@ -93,8 +93,12 @@ service qcom-usb-sh /system/bin/sh /init.qcom.usb.sh
 # USB compositions
 on property:sys.usb.config=diag,adb
     write /sys/class/android_usb/android0/enable 0
-    write /sys/class/android_usb/android0/idVendor 05C6
-    write /sys/class/android_usb/android0/idProduct 901D
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120329 VID/PID start
+    #write /sys/class/android_usb/android0/idVendor 05C6
+    #write /sys/class/android_usb/android0/idProduct 901D
+    write /sys/class/android_usb/android0/idVendor 19D2
+    write /sys/class/android_usb/android0/idProduct 0249
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120329 VID/PID end
     write /sys/class/android_usb/android0/f_diag/clients diag
     write /sys/class/android_usb/android0/functions diag,adb
     write /sys/class/android_usb/android0/enable 1
@@ -451,8 +455,12 @@ on property:sys.usb.config=rndis
 
 on property:sys.usb.config=rndis,none
     write /sys/class/android_usb/android0/enable 0
-    write /sys/class/android_usb/android0/idVendor 05C6
-    write /sys/class/android_usb/android0/idProduct F00E
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120329 VID/PID start
+    #write /sys/class/android_usb/android0/idVendor 05C6
+    #write /sys/class/android_usb/android0/idProduct F00E
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 1365
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120329 VID/PID end
     write /sys/class/android_usb/android0/functions rndis
     write /sys/class/android_usb/android0/enable 1
     setprop sys.usb.state rndis
@@ -462,8 +470,12 @@ on property:sys.usb.config=rndis,adb
 
 on property:sys.usb.config=rndis,none,adb
     write /sys/class/android_usb/android0/enable 0
-    write /sys/class/android_usb/android0/idVendor 05C6
-    write /sys/class/android_usb/android0/idProduct 9024
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120329 VID/PID start
+    # write /sys/class/android_usb/android0/idVendor 05C6
+    # write /sys/class/android_usb/android0/idProduct 9024
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 1373
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120329 VID/PID end
     write /sys/class/android_usb/android0/functions rndis,adb
     write /sys/class/android_usb/android0/enable 1
     start adbd
@@ -528,16 +540,24 @@ on property:sys.usb.config=rndis,diag,diag_mdm,diag_qsc,adb
 
 on property:sys.usb.config=ptp
     write /sys/class/android_usb/android0/enable 0
-    write /sys/class/android_usb/android0/idVendor 05C6
-    write /sys/class/android_usb/android0/idProduct 904D
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120412 VID/PID start
+    # write /sys/class/android_usb/android0/idVendor 05C6
+    # write /sys/class/android_usb/android0/idProduct 904D
+    write /sys/class/android_usb/android0/idVendor 19D2
+    write /sys/class/android_usb/android0/idProduct 0311
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120412 VID/PID END
     write /sys/class/android_usb/android0/functions ptp
     write /sys/class/android_usb/android0/enable 1
     setprop sys.usb.state ${sys.usb.config}
 
 on property:sys.usb.config=ptp,adb
     write /sys/class/android_usb/android0/enable 0
-    write /sys/class/android_usb/android0/idVendor 05C6
-    write /sys/class/android_usb/android0/idProduct 904E
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120412 VID/PID start
+    # write /sys/class/android_usb/android0/idVendor 05C6
+    # write /sys/class/android_usb/android0/idProduct 904E
+    write /sys/class/android_usb/android0/idVendor 19D2
+    write /sys/class/android_usb/android0/idProduct 0310
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120412 VID/PID END
     write /sys/class/android_usb/android0/functions ptp,adb
     write /sys/class/android_usb/android0/enable 1
     start adbd
@@ -545,16 +565,24 @@ on property:sys.usb.config=ptp,adb
 
 on property:sys.usb.config=mtp
     write /sys/class/android_usb/android0/enable 0
-    write /sys/class/android_usb/android0/idVendor 05C6
-    write /sys/class/android_usb/android0/idProduct F003
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120329 VID/PID start
+    #write /sys/class/android_usb/android0/idVendor 05C6
+    #write /sys/class/android_usb/android0/idProduct F003
+    write /sys/class/android_usb/android0/idVendor 19D2
+    write /sys/class/android_usb/android0/idProduct 0244
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120329 VID/PID end
     write /sys/class/android_usb/android0/functions mtp
     write /sys/class/android_usb/android0/enable 1
     setprop sys.usb.state ${sys.usb.config}
 
 on property:sys.usb.config=mtp,adb
     write /sys/class/android_usb/android0/enable 0
-    write /sys/class/android_usb/android0/idVendor 05C6
-    write /sys/class/android_usb/android0/idProduct 9039
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120329 VID/PID start
+    #write /sys/class/android_usb/android0/idVendor 05C6
+    #write /sys/class/android_usb/android0/idProduct 9039
+    write /sys/class/android_usb/android0/idVendor 19D2
+    write /sys/class/android_usb/android0/idProduct 0245
+    # [ECID:000000] ZTEBSP modify by zhangjing 20120329 VID/PID end
     write /sys/class/android_usb/android0/functions mtp,adb
     write /sys/class/android_usb/android0/enable 1
     start adbd
@@ -636,11 +664,23 @@ on property:sys.usb.config=diag,diag_mdm,ccid,adb
     start adbd
     setprop sys.usb.state ${sys.usb.config}
 
+# [ECID:000000] ZTEBSP add  by zhangjing for usb vid pid mi 20120329 start
+on property:sys.usb.config=diag,modem,nmea,mass_storage,adb
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 1350
+    write /sys/class/android_usb/android0/f_diag/clients diag
+    write /sys/class/android_usb/android0/f_serial/transports smd,tty
+    write /sys/class/android_usb/android0/functions diag,serial,mass_storage,adb
+    write /sys/class/android_usb/android0/enable 1
+    start adbd
+    setprop sys.usb.state ${sys.usb.config}
+
 on property:sys.usb.config=mass_storage,adb
     write /sys/class/android_usb/android0/enable 0
-    write /sys/class/android_usb/android0/idVendor 05C6
-    write /sys/class/android_usb/android0/idProduct 9015
-    write /sys/class/android_usb/android0/functions adb,mass_storage
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 1351
+    write /sys/class/android_usb/android0/functions mass_storage,adb
     write /sys/class/android_usb/android0/enable 1
     start adbd
     setprop sys.usb.state ${sys.usb.config}
@@ -648,12 +688,29 @@ on property:sys.usb.config=mass_storage,adb
 #Mass-storage only composition
 on property:sys.usb.config=mass_storage
     write /sys/class/android_usb/android0/enable 0
-    write /sys/class/android_usb/android0/idVendor 05C6
-    write /sys/class/android_usb/android0/idProduct F000
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 1353
+    write /sys/class/android_usb/android0/functions mass_storage
+    write /sys/class/android_usb/android0/enable 1
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=charge_only
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 1353
     write /sys/class/android_usb/android0/functions mass_storage
     write /sys/class/android_usb/android0/enable 1
     setprop sys.usb.state ${sys.usb.config}
 
+on property:sys.usb.config=charge_only,adb
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 1351
+    write /sys/class/android_usb/android0/functions mass_storage,adb
+    write /sys/class/android_usb/android0/enable 1
+    start adbd
+    setprop sys.usb.state ${sys.usb.config}
+
 on property:sys.usb.config=diag,qdss
     write /sys/class/android_usb/android0/enable 0
     write /sys/class/android_usb/android0/idVendor 05C6
@@ -747,3 +804,163 @@ on property:sys.usb.config=charging,adb
     write /sys/class/android_usb/android0/functions qdss,adb
     write /sys/class/android_usb/android0/enable 1
     setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=diag
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 0112
+    write /sys/class/android_usb/android0/f_diag/clients diag
+    write /sys/class/android_usb/android0/functions diag
+    write /sys/class/android_usb/android0/enable 1
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=serial_smd,mass_storage,adb
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 1354
+    write /sys/class/android_usb/android0/f_serial/transports smd
+    write /sys/class/android_usb/android0/functions serial,mass_storage,adb
+    write /sys/class/android_usb/android0/enable 1
+    start adbd
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=diag,serial_smd,mass_storage,adb
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 0229
+    write /sys/class/android_usb/android0/f_diag/clients diag
+    write /sys/class/android_usb/android0/f_serial/transports smd
+    write /sys/class/android_usb/android0/functions diag,serial,mass_storage,adb
+    write /sys/class/android_usb/android0/enable 1
+    start adbd
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=rndis,mtp
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19D2
+    write /sys/class/android_usb/android0/idProduct 0246
+    write /sys/class/android_usb/android0/functions rndis,mtp
+    write /sys/class/android_usb/android0/enable 1
+    start adbd
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=rndis,mtp,adb
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19D2
+    write /sys/class/android_usb/android0/idProduct 0247
+    write /sys/class/android_usb/android0/functions rndis,mtp,adb
+    write /sys/class/android_usb/android0/enable 1
+    start adbd
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=rndis,mtp,adb
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19D2
+    write /sys/class/android_usb/android0/idProduct 0247
+    write /sys/class/android_usb/android0/functions rndis,mtp,adb
+    write /sys/class/android_usb/android0/enable 1
+    start adbd
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=rndis,diag,adb,modem
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 0x0253
+    write /sys/class/android_usb/android0/f_diag/clients diag
+    write /sys/class/android_usb/android0/f_serial/transports smd
+    write /sys/class/android_usb/android0/functions rndis,diag,adb,serial
+    write /sys/class/android_usb/android0/enable 1
+    start adbd
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=diag,adb,modem,nmea
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 0x0248
+    write /sys/class/android_usb/android0/f_diag/clients diag
+    write /sys/class/android_usb/android0/f_serial/transports smd,tty
+    write /sys/class/android_usb/android0/functions diag,adb,serial
+    write /sys/class/android_usb/android0/enable 1
+    start adbd
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=diag,adb,modem,rmnet
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 0x0255
+    write /sys/class/android_usb/android0/f_diag/clients diag
+    write /sys/class/android_usb/android0/f_serial/transports smd
+    write /sys/class/android_usb/android0/functions diag,adb,serial,rmnet_smd
+    write /sys/class/android_usb/android0/enable 1
+    start adbd
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=mtp,cdrom
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 0x0292
+    # write /sys/class/android_usb/android0/iSerial 00000000000CDROM
+    write /sys/class/android_usb/android0/functions mtp,cdrom
+    write /sys/class/android_usb/android0/enable 1
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=mtp,cdrom,adb
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 0x0292
+    # write /sys/class/android_usb/android0/iSerial 00000000000CDROM
+    write /sys/class/android_usb/android0/functions mtp,cdrom,adb
+    write /sys/class/android_usb/android0/enable 1
+    start adbd
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=cdrom
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 0x0360
+    write /sys/class/android_usb/f_cdrom/lun/file /system/etc/pcsuite.iso
+    # write /sys/class/android_usb/android0/iSerial 00000000000CDROM
+    write /sys/class/android_usb/android0/functions cdrom
+    write /sys/class/android_usb/android0/enable 1
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=cdrom,adb
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 0x1361
+    write /sys/class/android_usb/f_cdrom/lun/file /system/etc/pcsuite.iso
+    # write /sys/class/android_usb/android0/iSerial 00000000000CDROM
+    write /sys/class/android_usb/android0/functions cdrom,adb
+    write /sys/class/android_usb/android0/enable 1
+    start adbd
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=charge
+    stop adbd
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/bDeviceClass 0
+    setprop sys.usb.state ${sys.usb.config}
+#//[ECID:000000] ZTEBSP zhangjing 20120329 end, for adding usb
+
+#//ztebsp zhangjing add for at, 20120725,++
+on property:sys.usb.config=diag,modem,nmea,at
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 0x0398
+    write /sys/class/android_usb/android0/f_diag/clients diag
+    write /sys/class/android_usb/android0/f_serial/transports smd,tty,smd
+    write /sys/class/android_usb/android0/functions diag,serial
+    write /sys/class/android_usb/android0/enable 1
+    setprop sys.usb.state ${sys.usb.config}
+
+on property:sys.usb.config=diag,modem,nmea,at,adb
+    write /sys/class/android_usb/android0/enable 0
+    write /sys/class/android_usb/android0/idVendor 19d2
+    write /sys/class/android_usb/android0/idProduct 0x0398
+    write /sys/class/android_usb/android0/f_diag/clients diag
+    write /sys/class/android_usb/android0/f_serial/transports smd,tty,smd
+    write /sys/class/android_usb/android0/functions diag,serial,adb
+    write /sys/class/android_usb/android0/enable 1
+    start adbd
+    setprop sys.usb.state ${sys.usb.config}
+#//ztebsp zhangjing add for at,20120725,--
diff --git a/rootdir/etc/init.qcom.usb.sh b/rootdir/etc/init.qcom.usb.sh
old mode 100644
new mode 100755
index 572ae54..1bbedbb
--- a/rootdir/etc/init.qcom.usb.sh
+++ b/rootdir/etc/init.qcom.usb.sh
@@ -85,6 +85,7 @@ esac
 #
 baseband=`getprop ro.baseband`
 echo 1  > /sys/class/android_usb/f_mass_storage/lun/nofua
+buildtype=`getprop ro.build.type`
 usb_config=`getprop persist.sys.usb.config`
 case "$usb_config" in
     "" | "none" | "adb") #USB persist config not set, select default configuration
@@ -102,7 +103,13 @@ case "$usb_config" in
                setprop persist.sys.usb.config diag,diag_mdm,diag_mdm2,serial_hsic,serial_hsusb,rmnet_hsic,rmnet_hsusb,mass_storage,adb
           ;;
           *)
-               setprop persist.sys.usb.config diag,serial_smd,serial_tty,rmnet_bam,mass_storage,adb
+               # [ECID:000000] ZTEBSP modify by zhangjing for default usb vid pid mi 20130905
+               #setprop persist.sys.usb.config diag,serial_smd,serial_tty,rmnet_bam,mass_storage,adb
+               if [ "$buildtype" = "user" ] ;then
+                    setprop persist.sys.usb.config diag,modem,nmea,mass_storage
+               else
+                    setprop persist.sys.usb.config diag,modem,nmea,mass_storage,adb
+               fi
           ;;
       esac
     ;;
-- 
1.7.9.5

